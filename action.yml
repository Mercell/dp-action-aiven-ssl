name: 'Create SSH credentials'
description: 'Action to generate keystore and truststore for aiven.'
inputs:
  service_key_path:
    description: 'SSM path to service.key text.'
    required: true
  service_cert_path: 
    description: 'SSM path to service.cert text.'
    required: true
  keystore_password_path: 
    description: 'SSM path to keystore password.'
    required: true
  truststore_password_path: 
    description: 'SSM path to truststore password'
    required: true
  service_ca_path:  
    description: 'SSM path to ca.pem text.'
    required: true
  working_directory:
    description: 'Directory in which files will be put'
    required: true
runs:
  using: "composite"
  steps:
    - run: ${{ github.action_path }}/entrypoint.sh
      working-directory: ${{ inputs.working_directory }}
      shell: bash
      env: 
          SERVICE_CERT_PATH: ${{ inputs.service_cert_path }}
          SERVICE_KEY_PATH: ${{ inputs.service_key_path }}
          CA_PATH: ${{ inputs.service_ca_path }}
          KEYSTORE_PASSWORD_PATH: ${{ inputs.keystore_password_path }}
          TRUSTSTORE_PASSWORD_PATH: ${{ inputs.truststore_password_path }}
